<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.ico" sizes="32x32" />
		<link rel="icon" href="/icon.svg" type="image/svg+xml" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
		<link rel="manifest" href="/manifest.webmanifest" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script>
			try {
				/** @type {'light' | 'dark' | 'system'} */
				const savedTheme = localStorage.getItem('evidence-theme') ?? 'system';
				const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
				const theme = savedTheme === 'system' ? (prefersDark ? 'dark' : 'light') : savedTheme;
				document.documentElement.setAttribute('data-theme', theme);
			} catch (e) {}
		</script>
		
		<link href="/_app/immutable/assets/0.ew8TXZN1.css" rel="stylesheet">
		<link href="/_app/immutable/assets/VennDiagram.Bcm8uG87.css" rel="stylesheet">
		<link rel="modulepreload" href="/_app/immutable/entry/start.DPKQPff-.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/entry.C8PsA17A.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/scheduler.ByCPKIuY.js">
		<link rel="modulepreload" href="/_app/immutable/entry/app.IkEhzEeH.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/preload-helper.D7HrI6pR.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/index.ClPuRMaH.js">
		<link rel="modulepreload" href="/_app/immutable/nodes/0.obrA8GUQ.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/VennDiagram.svelte_svelte_type_style_lang.CkZ_LV8G.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/index.rV6zwFgL.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/button.z-QNlCAg.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/updater.PxW6UabA.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/stores.0T_rOTg-.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/index.DRj0xAxe.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/AccordionItem.DrpDWHP0.js">
		<link rel="modulepreload" href="/_app/immutable/nodes/5.CdVuNI-b.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/QueryViewer.CV3bM2OH.js">
		<link rel="modulepreload" href="/_app/immutable/chunks/Prismjs.BSrMACER.js"><title>Evidence</title><!-- HEAD_svelte-6lktun_START --> <meta name="twitter:card" content="summary"><meta name="twitter:site" content="@evidence_dev"><!-- HEAD_svelte-6lktun_END -->
	</head>
	<body>
		<script>
			
		</script>
		<div>
			<!-- SvelteKit Hydrated Content -->
			   <div class="z-[1] fixed right-0 bottom-0 mx-10 my-6 w-80"></div> <div data-sveltekit-preload-data="hover" class="antialiased"> <header class="fixed w-full top-0 z-40 flex h-12 shrink-0 justify-start items-center gap-x-4 border-b border-base-300/50 bg-base-100/90 backdrop-blur print:hidden "><div class=" max-w-7xl mx-auto px-6 sm:px-8 md:px-12 flex flex-1 items-center justify-between" style="max-width:undefinedpx;"><div class="flex gap-x-4 items-center"><button type="button" class="text-base-content hover:bg-base-200 rounded-lg p-1 transition-all duration-500 md:hidden"><span class="sr-only" data-svelte-h="svelte-73kebv">Open sidebar</span> <svg class="w-5 h-5" width="100%" height="100%" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 6l16 0"></path><path d="M4 12l16 0"></path><path d="M4 18l16 0"></path></svg></button> <a href="/" class="text-sm font-bold text-base-content hidden md:block"><img src="/images/logo.png" alt="Home" class="h-5 aspect-auto block dark:hidden" href="/"> <img src="/images/logo.png" alt="Home" class="h-5 aspect-auto hidden dark:block" href="/"></a></div> <div class="flex gap-2 text-sm items-center"> <div class="flex gap-2 items-center">   </div> <div class="relative"> <button type="button" tabindex="0" aria-controls="ZOPi-VU4tJ" aria-expanded="false" data-state="closed" id="vluDRaDCq1" data-melt-dropdown-menu-trigger="" data-menu-trigger="" class="inline-flex items-center justify-center font-medium whitespace-nowrap transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-base-content-muted disabled:pointer-events-none disabled:opacity-50 hover:text-base-content h-8 rounded-md text-xs px-1 hover:bg-base-200 shadow-base-200" aria-label="Menu" data-button-root=""><svg class="h-6 w-6" width="100%" height="100%" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path></svg></button> </div></div></div></header> <div class=" max-w-7xl print:w-[650px] print:md:w-[841px] mx-auto print:md:px-0 print:px-0 px-6 sm:px-8 md:px-12 flex justify-start" style="max-width:undefinedpx;"><div class="print:hidden">  <aside class="w-48 flex-none hidden md:flex"><div class="hidden: md:block fixed w-48 top-20 bottom-8 overflow-y-auto flex-1 text-sm pretty-scrollbar"><div class="flex flex-col pb-6"><a class="sticky top-0 bg-base-100 shadow shadow-base-100 font-semibold pb-1 mb-1 group inline-block capitalize hover:underline text-base-heading" href="/">Dashboard</a> </div> </div> </aside></div> <main class="md:pl-8 md:pr-8  mt-16 sm:mt-20 flex-grow overflow-x-hidden print:px-0 print:mt-8"><div class="print:hidden"><div class="flex items-start mt-0 whitespace-nowrap overflow-auto"><div class="inline-flex items-center text-sm capitalize gap-1 text-base-content-muted mb-2 sm:mb-4"><a href="/" class="hover:underline">Home </a><svg class="icon icon-tabler icon-tabler-chevron-right" width="12px" height="12px" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 6l6 6l-6 6"></path></svg> <a href="/Oceania" class="hover:underline">Oceania</a></div></div></div> <article id="evidence-main-article" class="select-text markdown pb-10">      <h1 class="markdown" id="futureworld-shareholder-value-analytics" data-svelte-h="svelte-1cgzxlf"><a href="#futureworld-shareholder-value-analytics">Futureworld shareholder value analytics</a></h1> <div class="over-container svelte-1p12lev"> </div> <div class="over-container svelte-1p12lev"> </div> <div class="over-container svelte-1p12lev"> </div> <div class="over-container svelte-1p12lev"> </div> <div class="over-container svelte-1p12lev"> </div> <div class="over-container svelte-1p12lev"> </div> <div class="over-container svelte-1p12lev"> </div>   <div class="contents print:hidden"><div class="mt-2 mb-4 ml-0 mr-2 inline-block"> <button type="button" tabindex="0" role="combobox" aria-haspopup="dialog" aria-expanded="false" data-state="closed" id="KIqNIenDw6" data-melt-popover-trigger="" data-popover-trigger="" class="inline-flex items-center justify-center font-medium whitespace-nowrap transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-base-content-muted disabled:pointer-events-none disabled:opacity-50 bg-transparent shadow-sm rounded-md px-3 text-xs min-w-5 h-8 border border-base-300 hover:bg-base-200 shadow-base-200" aria-label="Start year" data-button-root="">Start year <div role="none" aria-orientation="vertical" aria-hidden data-orientation="vertical" data-melt-separator="" data-separator-root="" class="shrink-0 bg-base-300 w-[1px] mx-2 h-4"></div> 2008 <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" class="ml-2 h-4 w-4"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z" fill="currentColor"></path></svg> </button> </div></div>   <div class="contents print:hidden"><div class="mt-2 mb-4 ml-0 mr-2 inline-block"> <button type="button" tabindex="0" role="combobox" aria-haspopup="dialog" aria-expanded="false" data-state="closed" id="f60nmgd_tJ" data-melt-popover-trigger="" data-popover-trigger="" class="inline-flex items-center justify-center font-medium whitespace-nowrap transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-base-content-muted disabled:pointer-events-none disabled:opacity-50 bg-transparent shadow-sm rounded-md px-3 text-xs min-w-5 h-8 border border-base-300 hover:bg-base-200 shadow-base-200" aria-label="End year" data-button-root="">End year <div role="none" aria-orientation="vertical" aria-hidden data-orientation="vertical" data-melt-separator="" data-separator-root="" class="shrink-0 bg-base-300 w-[1px] mx-2 h-4"></div> 2024 <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" class="ml-2 h-4 w-4"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z" fill="currentColor"></path></svg> </button> </div></div> <div class="mb-4 mt-3"><button class="text-sm cursor-pointer inline-flex gap-2 svelte-6m89aj"><span class="marker svelte-6m89aj"></span> <span>Data breakdown</span></button>  </div> <div class="contents print:hidden"><div class=""> <div class="my-6 flex flex-wrap gap-x-1 gap-y-1" role="group"> <button class="mt-2 p-2 rounded-t flex-1 text-sm font-sans whitespace-nowrap transition ease-in active:bg-base-300 border-b-2 border-[--borderColor] bg-[--bgColor]" style="--bgColor: rgba(254,74,73,0.1); --borderColor: rgba(254,74,73,0.5);">Performance</button><button class="mt-2 p-2 rounded-t flex-1 text-sm font-sans whitespace-nowrap transition ease-in active:bg-base-300 border-base-300 border-b-2 bg-base-200/50 hover:bg-base-200" style="--bgColor: rgba(254,74,73,0.1); --borderColor: rgba(254,74,73,0.5);">Perception</button><button class="mt-2 p-2 rounded-t flex-1 text-sm font-sans whitespace-nowrap transition ease-in active:bg-base-300 border-base-300 border-b-2 bg-base-200/50 hover:bg-base-200" style="--bgColor: rgba(254,74,73,0.1); --borderColor: rgba(254,74,73,0.5);">Pay off</button> </div></div></div>   <div class="contents print:hidden"><div class="mt-2 mb-4 ml-0 mr-2 inline-block"> <button type="button" tabindex="0" role="combobox" aria-haspopup="dialog" aria-expanded="false" data-state="closed" id="e8_AhNxFyP" data-melt-popover-trigger="" data-popover-trigger="" class="inline-flex items-center justify-center font-medium whitespace-nowrap transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-base-content-muted disabled:pointer-events-none disabled:opacity-50 bg-transparent shadow-sm rounded-md px-3 text-xs min-w-5 h-8 border border-base-300 hover:bg-base-200 shadow-base-200" aria-label="Select a sector" data-button-root="">Select a sector <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" class="ml-2 h-4 w-4"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z" fill="currentColor"></path></svg> <div role="none" aria-orientation="vertical" aria-hidden data-orientation="vertical" data-melt-separator="" data-separator-root="" class="shrink-0 bg-base-300 w-[1px] mx-2 h-4"></div> <span class="inline-flex items-center border py-0.5 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-base-content-muted focus:ring-offset-2 select-none border-transparent bg-base-300 text-base-content shadow hover:bg-base-300/80 rounded-sm px-1 font-normal sm:hidden">5</span> <div class="hidden space-x-1 sm:flex"><span class="inline-flex items-center border py-0.5 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-base-content-muted focus:ring-offset-2 select-none border-transparent bg-base-300 text-base-content shadow hover:bg-base-300/80 rounded-sm px-1 font-normal">5 Selected</span></div></button> </div></div>   <div class="w-full h-64"><div class="animate-pulse h-full w-full my-2" data-svelte-h="svelte-nbneoa"><span class="sr-only">Loading...</span> <div class="h-full w-full rounded-md bg-base-300"></div></div></div>  <div class="mb-4 mt-3"><button class="text-sm cursor-pointer inline-flex gap-2 svelte-6m89aj"><span class="marker svelte-6m89aj"></span> <span>Sector definitions</span></button>  </div></article></main> <div class="print:hidden"><aside class="hidden lg:block w-48"><div class="fixed w-48 top-20 bottom-20 pl-4 px-3 overflow-auto pretty-scrollbar"></div></aside></div></div></div>  
			<script type="application/json" data-sveltekit-fetched data-url="/api/customFormattingSettings.json/GET.json">{"status":200,"statusText":"","headers":{},"body":"{\"customFormattingSettings\":{\"version\":\"1.0\",\"customFormats\":[]}}"}</script>
			<script type="application/json" data-sveltekit-fetched data-url="/api/pagesManifest.json">{"status":200,"statusText":"","headers":{},"body":"{\"label\":\"Home\",\"href\":\"/\",\"children\":{\"[region]\":{\"children\":{},\"isTemplated\":true,\"isPage\":true}},\"frontMatter\":{\"title\":\"Futureworld shareholder value analytics\"},\"isTemplated\":false,\"isPage\":true}"}</script>
			<script type="application/json" data-sveltekit-fetched data-url="/api//[region]/evidencemeta.json">{"status":200,"statusText":"","headers":{},"body":"{\"queries\":[{\"id\":\"start_year\",\"compiledQueryString\":\"SELECT\\n    DISTINCT year,\\n    year::VARCHAR as year_str\\nFROM\\n    regions\\nWHERE year IS NOT NULL\\nORDER BY year\",\"inputQueryString\":\"SELECT\\n    DISTINCT year,\\n    year::VARCHAR as year_str\\nFROM\\n    regions\\nWHERE year IS NOT NULL\\nORDER BY year\",\"compiled\":false,\"inline\":true},{\"id\":\"end_year\",\"compiledQueryString\":\"SELECT\\n    *\\nFROM\\n    (SELECT\\n    DISTINCT year,\\n    year::VARCHAR as year_str\\nFROM\\n    regions\\nWHERE year IS NOT NULL\\nORDER BY year)\\nWHERE\\n    year >= CAST(${inputs.start_date.value} AS INT)\",\"inputQueryString\":\"SELECT\\n    *\\nFROM\\n    ${start_year}\\nWHERE\\n    year >= CAST(${inputs.start_date.value} AS INT)\",\"compiled\":true,\"inline\":true},{\"id\":\"category\",\"compiledQueryString\":\"SELECT\\n  *\\nFROM\\n  (SELECT \\n    'market_cap' as metric, 'Perception' as category,  'usd' as unit, 2 as \\\"order\\\"\\n  UNION ALL\\n  SELECT 'intrinsic_value', 'Performance', 'usd', 1\\n  UNION ALL\\n  SELECT 'tsr', 'Pay off', 'pct', 3)\\nORDER BY \\\"order\\\"\",\"inputQueryString\":\"SELECT\\n  *\\nFROM\\n  (SELECT \\n    'market_cap' as metric, 'Perception' as category,  'usd' as unit, 2 as \\\"order\\\"\\n  UNION ALL\\n  SELECT 'intrinsic_value', 'Performance', 'usd', 1\\n  UNION ALL\\n  SELECT 'tsr', 'Pay off', 'pct', 3)\\nORDER BY \\\"order\\\"\",\"compiled\":false,\"inline\":true},{\"id\":\"pay_offs\",\"compiledQueryString\":\"SELECT\\n  *\\nFROM\\n  (SELECT \\n    'tsr' as metric, 'Total shareholder return' as metric_name, 1 as \\\"order\\\"\\n  UNION ALL\\n  SELECT 'discount_or_premium', 'Discount/Premium', 2)\\nORDER BY \\\"order\\\"\",\"inputQueryString\":\"SELECT\\n  *\\nFROM\\n  (SELECT \\n    'tsr' as metric, 'Total shareholder return' as metric_name, 1 as \\\"order\\\"\\n  UNION ALL\\n  SELECT 'discount_or_premium', 'Discount/Premium', 2)\\nORDER BY \\\"order\\\"\",\"compiled\":false,\"inline\":true},{\"id\":\"sectors\",\"compiledQueryString\":\"SELECT\\n    DISTINCT sector\\nFROM\\n    regions\\nWHERE sector IS NOT NULL\",\"inputQueryString\":\"SELECT\\n    DISTINCT sector\\nFROM\\n    regions\\nWHERE sector IS NOT NULL\",\"compiled\":false,\"inline\":true},{\"id\":\"sector_by_year\",\"compiledQueryString\":\"WITH yearly_metrics AS (\\n    SELECT\\n        year,\\n        region,\\n        sector,\\n        avg(market_cap) as 'Market capitalization',\\n        avg(intrinsic_value) as 'Intrinsic value',\\n        avg(tsr) as yearly_tsr,\\n        (avg(market_cap) - avg(intrinsic_value))/ avg(intrinsic_value) as discount_or_premium\\n    FROM\\n        regions\\n    WHERE\\n        region = '${params.region}'\\n        AND sector IN ${inputs.sector_multi.value}\\n        AND year between ${inputs.start_date.value}::INT and ${inputs.end_date.value}::INT\\n    GROUP BY ALL\\n),\\ncompound_tsr AS (\\n    SELECT\\n        *,\\n        EXP(SUM(LN(1 + yearly_tsr)) OVER (\\n            PARTITION BY sector\\n            ORDER BY year\\n        )) - 1 as cumulative_tsr\\n    FROM yearly_metrics\\n)\\nSELECT\\n    year,\\n    region,\\n    sector,\\n    \\\"Market capitalization\\\",\\n    \\\"Intrinsic value\\\",\\n    discount_or_premium,\\n    yearly_tsr,\\n    cumulative_tsr\\nFROM\\n    compound_tsr\\nORDER BY\\n    sector,\\n    year\",\"inputQueryString\":\"WITH yearly_metrics AS (\\n    SELECT\\n        year,\\n        region,\\n        sector,\\n        avg(market_cap) as 'Market capitalization',\\n        avg(intrinsic_value) as 'Intrinsic value',\\n        avg(tsr) as yearly_tsr,\\n        (avg(market_cap) - avg(intrinsic_value))/ avg(intrinsic_value) as discount_or_premium\\n    FROM\\n        regions\\n    WHERE\\n        region = '${params.region}'\\n        AND sector IN ${inputs.sector_multi.value}\\n        AND year between ${inputs.start_date.value}::INT and ${inputs.end_date.value}::INT\\n    GROUP BY ALL\\n),\\ncompound_tsr AS (\\n    SELECT\\n        *,\\n        EXP(SUM(LN(1 + yearly_tsr)) OVER (\\n            PARTITION BY sector\\n            ORDER BY year\\n        )) - 1 as cumulative_tsr\\n    FROM yearly_metrics\\n)\\nSELECT\\n    year,\\n    region,\\n    sector,\\n    \\\"Market capitalization\\\",\\n    \\\"Intrinsic value\\\",\\n    discount_or_premium,\\n    yearly_tsr,\\n    cumulative_tsr\\nFROM\\n    compound_tsr\\nORDER BY\\n    sector,\\n    year\",\"compiled\":false,\"inline\":true},{\"id\":\"output\",\"compiledQueryString\":\"WITH yearly_market_cap AS (\\n    SELECT \\n        sector,\\n        MAKE_DATE(year::INT, 1, 1) AS year_date,  -- converting numeric year to date\\n        AVG(\\\"Market capitalization\\\") AS yearly_market_cap,\\n        AVG(\\\"Intrinsic value\\\") AS yearly_iv,\\n        AVG(\\\"discount_or_premium\\\") AS yearly_dp,\\n        AVG(\\\"cumulative_tsr\\\") AS yearly_tsr,\\n    FROM \\n        (WITH yearly_metrics AS (\\n    SELECT\\n        year,\\n        region,\\n        sector,\\n        avg(market_cap) as 'Market capitalization',\\n        avg(intrinsic_value) as 'Intrinsic value',\\n        avg(tsr) as yearly_tsr,\\n        (avg(market_cap) - avg(intrinsic_value))/ avg(intrinsic_value) as discount_or_premium\\n    FROM\\n        regions\\n    WHERE\\n        region = '${params.region}'\\n        AND sector IN ${inputs.sector_multi.value}\\n        AND year between ${inputs.start_date.value}::INT and ${inputs.end_date.value}::INT\\n    GROUP BY ALL\\n),\\ncompound_tsr AS (\\n    SELECT\\n        *,\\n        EXP(SUM(LN(1 + yearly_tsr)) OVER (\\n            PARTITION BY sector\\n            ORDER BY year\\n        )) - 1 as cumulative_tsr\\n    FROM yearly_metrics\\n)\\nSELECT\\n    year,\\n    region,\\n    sector,\\n    \\\"Market capitalization\\\",\\n    \\\"Intrinsic value\\\",\\n    discount_or_premium,\\n    yearly_tsr,\\n    cumulative_tsr\\nFROM\\n    compound_tsr\\nORDER BY\\n    sector,\\n    year)\\n    GROUP BY \\n        sector, year\\n    ORDER BY year_date desc, yearly_market_cap desc\\n)\\nSELECT \\n    sector,\\n    sum(yearly_market_cap) as total_market_cap,\\n    ARRAY_AGG({'year': year_date, 'market_cap': yearly_market_cap}) AS market_cap_data,\\n    ARRAY_AGG({'year': year_date, 'iv': yearly_iv}) AS iv_data,\\n    ARRAY_AGG({'year': year_date, 'dp': yearly_dp}) AS dp_data,\\n    ARRAY_AGG({'year': year_date, 'tsr': yearly_tsr}) AS tsr_data\\nFROM \\n    yearly_market_cap\\nGROUP BY \\n    sector\",\"inputQueryString\":\"WITH yearly_market_cap AS (\\n    SELECT \\n        sector,\\n        MAKE_DATE(year::INT, 1, 1) AS year_date,  -- converting numeric year to date\\n        AVG(\\\"Market capitalization\\\") AS yearly_market_cap,\\n        AVG(\\\"Intrinsic value\\\") AS yearly_iv,\\n        AVG(\\\"discount_or_premium\\\") AS yearly_dp,\\n        AVG(\\\"cumulative_tsr\\\") AS yearly_tsr,\\n    FROM \\n        ${sector_by_year}\\n    GROUP BY \\n        sector, year\\n    ORDER BY year_date desc, yearly_market_cap desc\\n)\\nSELECT \\n    sector,\\n    sum(yearly_market_cap) as total_market_cap,\\n    ARRAY_AGG({'year': year_date, 'market_cap': yearly_market_cap}) AS market_cap_data,\\n    ARRAY_AGG({'year': year_date, 'iv': yearly_iv}) AS iv_data,\\n    ARRAY_AGG({'year': year_date, 'dp': yearly_dp}) AS dp_data,\\n    ARRAY_AGG({'year': year_date, 'tsr': yearly_tsr}) AS tsr_data\\nFROM \\n    yearly_market_cap\\nGROUP BY \\n    sector\",\"compiled\":true,\"inline\":true}]}"}</script>
			<script>
				{
					__sveltekit_9xj8re = {
						base: ""
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("/_app/immutable/entry/start.DPKQPff-.js"),
						import("/_app/immutable/entry/app.IkEhzEeH.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		
		</div>

		<!-- SplashScreen -->
		<div
			aria-disabled
			id="__evidence_project_splash"
			data-test-id="__evidence_project_splash"
			class="fixed inset-0 w-screen h-screen flex items-center justify-center z-[9999] bg-base-100"
			style="visibility: hidden"
		>
			<svg
				width="100"
				height="100"
				viewBox="-8 -8 588 588"
				xmlns="http://www.w3.org/2000/svg"
				fill="currentColor"
				class="animate-pulse"
			>
				<path
					d="M7.19462e-05 74.3583C109.309 74.3583 195.795 86.2578 286.834 37.825C377.872 -10.6077 466.416 1.29174 573.667 1.29175L573.667 126.549C466.416 126.549 377.373 114.91 286.834 163.082C196.294 211.254 109.309 199.615 6.11417e-05 199.615L7.19462e-05 74.3583Z"
				/>
				<path
					d="M573.669 499.31C464.36 499.31 377.874 487.411 286.835 535.843C195.797 584.276 107.252 572.377 0.0014801 572.377V447.12C107.252 447.12 196.295 458.758 286.835 410.586C377.375 362.415 464.36 374.053 573.669 374.053V499.31Z"
				/>
				<path
					d="M452.896 186.499C395.028 187.686 341.581 194.947 286.835 224.074C211.396 264.212 136.995 262.826 52.2355 261.247C35.2696 260.931 17.8887 260.608 0.0014801 260.608V385.865C18.1032 385.865 35.6721 386.204 52.81 386.534C137.212 388.162 211.162 389.589 286.835 349.331C341.838 320.07 395.18 312.831 452.896 311.685V186.499Z"
				/>
			</svg>
		</div>
	</body>
</html>
