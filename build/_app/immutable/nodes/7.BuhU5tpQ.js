import{a as K,y as L,m as k,k as b,A as N,e as $,B as A,d as v,h as T,l as E,n as y,D as I,b as j,j as O,t as S,o as Q,w as B}from"../chunks/scheduler.ByCPKIuY.js";import{S as X,i as Y,a as g,t as w,g as P,c as R,b as q,d as H,m as M,e as U}from"../chunks/index.ClPuRMaH.js";import{h as D,u as Z,o as x,I as ee,i as te,T as le,j as ne}from"../chunks/VennDiagram.svelte_svelte_type_style_lang.CkZ_LV8G.js";import"../chunks/entry.C8PsA17A.js";import{h as ae,u as oe}from"../chunks/await_block.LsyRshgW.js";function F(h,e,l){const t=h.slice();return t[8]=e[l][0],t[9]=e[l][1],t}function V(h,e,l){const t=h.slice();return t[12]=e[l][0],t[13]=e[l][1],t}function se(h){let e,l,t=h[16].message+"",n;return{c(){e=N(`An error was encountered while loading project schema.

	`),l=$("pre"),n=N(t),this.h()},l(c){e=A(c,`An error was encountered while loading project schema.

	`),l=v(c,"PRE",{class:!0});var u=T(l);n=A(u,t),u.forEach(b),this.h()},h(){E(l,"class","px-4 py-2 bg-negative")},m(c,u){k(c,e,u),k(c,l,u),y(l,n)},p:I,i:I,o:I,d(c){c&&(b(e),b(l))}}}function re(h){let e,l,t,n=[],c=new Map,u,m=D(Object.entries(h[7]));const i=o=>o[8];for(let o=0;o<m.length;o+=1){let a=F(h,m,o),_=i(a);c.set(_,n[o]=J(_,a))}return{c(){e=$("section"),l=$("div"),t=$("ul");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=v(o,"SECTION",{});var a=T(e);l=v(a,"DIV",{});var _=T(l);t=v(_,"UL",{class:!0});var r=T(t);for(let p=0;p<n.length;p+=1)n[p].l(r);r.forEach(b),_.forEach(b),a.forEach(b),this.h()},h(){E(t,"class","list-none m-0 p-0 flex flex-col gap-1 mb-1")},m(o,a){k(o,e,a),y(e,l),y(l,t);for(let _=0;_<n.length;_+=1)n[_]&&n[_].m(t,null);u=!0},p(o,a){a&7&&(m=D(Object.entries(o[7])),P(),n=Z(n,a,i,1,o,m,c,t,x,J,null,F),R())},i(o){if(!u){for(let a=0;a<m.length;a+=1)g(n[a]);u=!0}},o(o){for(let a=0;a<n.length;a+=1)w(n[a]);u=!1},d(o){o&&b(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function W(h){let e,l=[],t=new Map,n,c,u=D(Object.entries(h[9]));const m=i=>i[12];for(let i=0;i<u.length;i+=1){let o=V(h,u,i),a=m(o);t.set(a,l[i]=G(a,o))}return{c(){e=$("ul");for(let i=0;i<l.length;i+=1)l[i].c();n=j(),this.h()},l(i){e=v(i,"UL",{class:!0});var o=T(e);for(let a=0;a<l.length;a+=1)l[a].l(o);n=O(o),o.forEach(b),this.h()},h(){E(e,"class","list-none m-0 flex flex-col gap-1")},m(i,o){k(i,e,o);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);y(e,n),c=!0},p(i,o){o&5&&(u=D(Object.entries(i[9])),P(),l=Z(l,o,m,1,i,u,t,e,x,G,n,V),R())},i(i){if(!c){for(let o=0;o<u.length;o+=1)g(l[o]);c=!0}},o(i){for(let o=0;o<l.length;o+=1)w(l[o]);c=!1},d(i){i&&b(e);for(let o=0;o<l.length;o+=1)l[o].d()}}}function z(h){let e,l;return e=new ne({props:{columns:h[13].columns,rowClass:"ml-6 "}}),{c(){q(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){M(e,t,n),l=!0},p:I,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function G(h,e){let l,t,n,c,u=e[12]+"",m,i,o,a,_,r;n=new ee({props:{src:le,class:"w-5 h-5 mr-1"}});function p(){return e[5](e[13])}let s=e[0]===e[13]&&z(e);return{key:h,first:null,c(){l=$("li"),t=$("button"),q(n.$$.fragment),c=j(),m=N(u),i=j(),s&&s.c(),o=L(),this.h()},l(f){l=v(f,"LI",{class:!0});var d=T(l);t=v(d,"BUTTON",{class:!0});var C=T(t);H(n.$$.fragment,C),c=O(C),m=A(C,u),C.forEach(b),d.forEach(b),i=O(f),s&&s.l(f),o=L(),this.h()},h(){E(t,"class","bg-base-200 px-2 py-1 rounded flex w-full hover:bg-base-300 hover:text-base-content"),S(t,"bg-info",e[0]===e[13]),S(t,"text-info-content",e[0]===e[13]),E(l,"class","font-mono m-0 text-sm font-bold ml-3"),this.first=l},m(f,d){k(f,l,d),y(l,t),M(n,t,null),y(t,c),y(t,m),k(f,i,d),s&&s.m(f,d),k(f,o,d),a=!0,_||(r=Q(t,"click",p),_=!0)},p(f,d){e=f,(!a||d&5)&&S(t,"bg-info",e[0]===e[13]),(!a||d&5)&&S(t,"text-info-content",e[0]===e[13]),e[0]===e[13]?s?(s.p(e,d),d&1&&g(s,1)):(s=z(e),s.c(),g(s,1),s.m(o.parentNode,o)):s&&(P(),w(s,1,1,()=>{s=null}),R())},i(f){a||(g(n.$$.fragment,f),g(s),a=!0)},o(f){w(n.$$.fragment,f),w(s),a=!1},d(f){f&&(b(l),b(i),b(o)),U(n),s&&s.d(f),_=!1,r()}}}function J(h,e){let l,t,n,c,u=e[8]+"",m,i,o,a,_,r;n=new ee({props:{src:te,class:"w-5 h-5 mr-1"}});function p(){return e[4](e[8])}let s=e[1]===e[8]&&W(e);return{key:h,first:null,c(){l=$("li"),t=$("button"),q(n.$$.fragment),c=j(),m=N(u),i=j(),s&&s.c(),o=L(),this.h()},l(f){l=v(f,"LI",{class:!0});var d=T(l);t=v(d,"BUTTON",{class:!0});var C=T(t);H(n.$$.fragment,C),c=O(C),m=A(C,u),C.forEach(b),d.forEach(b),i=O(f),s&&s.l(f),o=L(),this.h()},h(){E(t,"class","bg-base-200 px-2 py-1 rounded font-bold flex w-full hover:bg-base-300 hover:text-base-content"),S(t,"bg-info",e[1]===e[8]),S(t,"text-info-content",e[1]===e[8]),E(l,"class","font-mono m-0 text-sm"),this.first=l},m(f,d){k(f,l,d),y(l,t),M(n,t,null),y(t,c),y(t,m),k(f,i,d),s&&s.m(f,d),k(f,o,d),a=!0,_||(r=Q(t,"click",p),_=!0)},p(f,d){e=f,(!a||d&6)&&S(t,"bg-info",e[1]===e[8]),(!a||d&6)&&S(t,"text-info-content",e[1]===e[8]),e[1]===e[8]?s?(s.p(e,d),d&2&&g(s,1)):(s=W(e),s.c(),g(s,1),s.m(o.parentNode,o)):s&&(P(),w(s,1,1,()=>{s=null}),R())},i(f){a||(g(n.$$.fragment,f),g(s),a=!0)},o(f){w(n.$$.fragment,f),w(s),a=!1},d(f){f&&(b(l),b(i),b(o)),U(n),s&&s.d(f),_=!1,r()}}}function ie(h){let e;return{c(){e=N("Loading Schema Information...")},l(l){e=A(l,"Loading Schema Information...")},m(l,t){k(l,e,t)},p:I,i:I,o:I,d(l){l&&b(e)}}}function ce(h){let e,l,t={ctx:h,current:null,token:null,hasCatch:!0,pending:ie,then:re,catch:se,value:7,error:16,blocks:[,,,]};return ae(h[2](),t),{c(){e=L(),t.block.c()},l(n){e=L(),t.block.l(n)},m(n,c){k(n,e,c),t.block.m(n,t.anchor=c),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,[c]){h=n,oe(t,h,c)},i(n){l||(g(t.block),l=!0)},o(n){for(let c=0;c<3;c+=1){const u=t.blocks[c];w(u)}l=!1},d(n){n&&b(e),t.block.d(n),t.token=null,t=null}}}function fe(h,e,l){let{data:t}=e,{__db:n}=t;async function c(){const a=await n.query("SELECT * FROM information_schema.tables WHERE table_catalog = 'memory' AND table_name != 'stats'"),_={};return await Promise.all(a.map(async r=>{const p=await n.query(`SELECT * FROM information_schema.columns WHERE table_name = '${r.table_name}' AND table_schema = '${r.table_schema}'`);_[r.table_schema]||(_[r.table_schema]={}),_[r.table_schema][r.table_name]={table:r,columns:p}})),_}let u="",m="";const i=a=>{l(1,m=m===a?"":a),l(0,u="")},o=a=>{l(0,u=u===a?"":a)};return h.$$set=a=>{"data"in a&&l(3,t=a.data)},[u,m,c,t,i,o]}class ue extends X{constructor(e){super(),Y(this,e,fe,ce,K,{data:3})}}function he(h){let e,l="Project Schema",t,n,c="This page details the tables and columns that are currently loaded in your project.",u,m,i="Sources",o,a,_;return a=new ue({props:{data:h[0]}}),{c(){e=$("h1"),e.textContent=l,t=j(),n=$("p"),n.textContent=c,u=j(),m=$("h2"),m.textContent=i,o=j(),q(a.$$.fragment),this.h()},l(r){e=v(r,"H1",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-15777oi"&&(e.textContent=l),t=O(r),n=v(r,"P",{class:!0,"data-svelte-h":!0}),B(n)!=="svelte-ak948l"&&(n.textContent=c),u=O(r),m=v(r,"H2",{class:!0,"data-svelte-h":!0}),B(m)!=="svelte-9qt1ro"&&(m.textContent=i),o=O(r),H(a.$$.fragment,r),this.h()},h(){E(e,"class","markdown"),E(n,"class","markdown"),E(m,"class","markdown")},m(r,p){k(r,e,p),k(r,t,p),k(r,n,p),k(r,u,p),k(r,m,p),k(r,o,p),M(a,r,p),_=!0},p(r,[p]){const s={};p&1&&(s.data=r[0]),a.$set(s)},i(r){_||(g(a.$$.fragment,r),_=!0)},o(r){w(a.$$.fragment,r),_=!1},d(r){r&&(b(e),b(t),b(n),b(u),b(m),b(o)),U(a,r)}}}function me(h,e,l){let{data:t}=e;return h.$$set=n=>{"data"in n&&l(0,t=n.data)},[t]}class ge extends X{constructor(e){super(),Y(this,e,me,he,K,{data:0})}}export{ge as component};
